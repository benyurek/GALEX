This bash script executes the final mosaicking step of the GALEX processing pipeline as a SLURM array job to combine multiple cleaned and inpainted images into unified mosaic products. The script requests 94 CPU cores on a single node with a 36-hour time limit on the windfall partition and runs as an array job with four parallel tasks, allowing simultaneous processing of four different sky regions from the same coordinate group. When the job starts, it loads Python 3.9 and activates the virtual environment, then takes a group number as a command-line argument to construct the path to the input coordinate file. Each array task uses the sed command to extract a specific line from the coordinate file based on its SLURM array task ID, with each line containing the batch number, index, right ascension, and declination for one sky position. The script then executes the montage.py Python script with these coordinates as arguments, passing the batch and coordinate information needed to locate the directory containing all the cleaned draw files from the previous inpainting step. The execution is timed and wrapped with date stamps to monitor how long the mosaicking process takes for each coordinate set, with the srun command ensuring proper SLURM resource allocation as MontagePy reprojects all individual images to a common coordinate frame and combines them into a single large mosaic covering an 8-degree by 8-degree field of view. This parallel array job design allows efficient simultaneous creation of mosaics for four different sky regions, with each task independently handling all the images associated with one coordinate position from edge cleaning through final image combination.
